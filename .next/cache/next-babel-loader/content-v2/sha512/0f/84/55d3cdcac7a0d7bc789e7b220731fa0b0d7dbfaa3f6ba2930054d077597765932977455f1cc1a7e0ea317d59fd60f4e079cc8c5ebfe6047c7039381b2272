{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/harryelnekave/Desktop/DEV/NextJS/06-onwards-to-a-bigger-project-starting-project/pages/[meetupId]/index.js\",\n    _this = this;\n\n// the same way we have in regular React Project dynamic id (e.g:  our-domain/:id)\nimport cli from \"@angular/cli\";\nimport { Router, useRouter } from \"next/router\";\nimport { useEffect } from \"react/cjs/react.development\";\nimport MeetupDetails from \"../../components/meetups/MeetupDetails\"; // our-domain/<dynamic-id>\n\nvar MeetupDetailsDynamicPage = function MeetupDetailsDynamicPage(props) {\n  //   return <MeetupDetails {...props.meetupData} />;\n  return /*#__PURE__*/_jsxDEV(MeetupDetails, {\n    image: props.meetupData.imgae,\n    title: props.meetupData.title,\n    address: props.meetupData.address,\n    description: props.meetupData.description\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 12,\n    columnNumber: 5\n  }, _this);\n}; // With getStaticProps a page is pre-generated during the Build Process\n// now what does this mean? this means that of Coures NextJS to pregenerate all versions of this dynamic Page\n// in advance for all the supported meetupId's because since thi is dynamic NextJS needs to know for which meetupsId's values\n// it should pregenerate the page\n// keep in mind that this is not pregenerated when the user visist thsi page with a specific meetupId but during the build process\n// so here we need to pregenrate for all the potential url (meetupId's) user might be entering on Run Time\n// and if they enter a value for which we did not pregenerage a page they will see a 404 Page not found error\n// this is why we are using this getStaticPaths function where we describe all the dynamcis segments so all the meetupId's in this\n// case where a page should be pregeneragted\n\n\n_c = MeetupDetailsDynamicPage;\nexport var __N_SSG = true;\nexport default MeetupDetailsDynamicPage;\n\nvar _c;\n\n$RefreshReg$(_c, \"MeetupDetailsDynamicPage\");","map":{"version":3,"sources":["/Users/harryelnekave/Desktop/DEV/NextJS/06-onwards-to-a-bigger-project-starting-project/pages/[meetupId]/index.js"],"names":["cli","Router","useRouter","useEffect","MeetupDetails","MeetupDetailsDynamicPage","props","meetupData","imgae","title","address","description"],"mappings":";;;;;AAAA;AAEA,OAAOA,GAAP,MAAgB,cAAhB;AAEA,SAASC,MAAT,EAAiBC,SAAjB,QAAkC,aAAlC;AACA,SAASC,SAAT,QAA0B,6BAA1B;AACA,OAAOC,aAAP,MAA0B,wCAA1B,C,CACA;;AACA,IAAMC,wBAAwB,GAAG,SAA3BA,wBAA2B,CAACC,KAAD,EAAW;AAC1C;AACA,sBACE,QAAC,aAAD;AACE,IAAA,KAAK,EAAEA,KAAK,CAACC,UAAN,CAAiBC,KAD1B;AAEE,IAAA,KAAK,EAAEF,KAAK,CAACC,UAAN,CAAiBE,KAF1B;AAGE,IAAA,OAAO,EAAEH,KAAK,CAACC,UAAN,CAAiBG,OAH5B;AAIE,IAAA,WAAW,EAAEJ,KAAK,CAACC,UAAN,CAAiBI;AAJhC;AAAA;AAAA;AAAA;AAAA,WADF;AAQD,CAVD,C,CAYA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;KApBMN,wB;;AA4GN,eAAeA,wBAAf","sourcesContent":["// the same way we have in regular React Project dynamic id (e.g:  our-domain/:id)\n\nimport cli from \"@angular/cli\";\nimport { MongoClient, ObjectId } from \"mongodb\";\nimport { Router, useRouter } from \"next/router\";\nimport { useEffect } from \"react/cjs/react.development\";\nimport MeetupDetails from \"../../components/meetups/MeetupDetails\";\n// our-domain/<dynamic-id>\nconst MeetupDetailsDynamicPage = (props) => {\n  //   return <MeetupDetails {...props.meetupData} />;\n  return (\n    <MeetupDetails\n      image={props.meetupData.imgae}\n      title={props.meetupData.title}\n      address={props.meetupData.address}\n      description={props.meetupData.description}\n    />\n  );\n};\n\n// With getStaticProps a page is pre-generated during the Build Process\n// now what does this mean? this means that of Coures NextJS to pregenerate all versions of this dynamic Page\n// in advance for all the supported meetupId's because since thi is dynamic NextJS needs to know for which meetupsId's values\n// it should pregenerate the page\n// keep in mind that this is not pregenerated when the user visist thsi page with a specific meetupId but during the build process\n// so here we need to pregenrate for all the potential url (meetupId's) user might be entering on Run Time\n// and if they enter a value for which we did not pregenerage a page they will see a 404 Page not found error\n// this is why we are using this getStaticPaths function where we describe all the dynamcis segments so all the meetupId's in this\n// case where a page should be pregeneragted\nexport const getStaticPaths = async () => {\n  const client = await MongoClient.connect(\n    \"mongodb+srv://admin:admin@cluster0.tcybw5n.mongodb.net/meetupsDB\"\n  );\n  const db = client.db();\n  const meetupsCollection = db.collection(\"meetups\");\n\n  // meetupsCollection.find({}, {_id: 1});\n  // {} retrieve all data with no filter criteria\n  // and {_id: 1} we define that only the field _id will be extracted for every document\n  const meetups = await meetupsCollection.find({}, { _id: 1 }).toArray();\n\n  client.close();\n\n  return {\n    // this fallback value determine whether the paths array return all the meetupId's value if set to false\n    // or only some of them when set to true.\n    // that means that if a user enter a meetupId path that is not supported in the paths array a 404 Page not found\n    // will be retrieved\n    fallback: false,\n    // In reality we won't of course hardcode those values manually but fetch for your supported meetupId's from a database\n    // or from an API and that will retrieve that array dynamcally\n    // paths: [\n    //   {\n    //     params: {\n    //       meetupId: \"m1\",\n    //     },\n    //   },\n    //   {\n    //     params: {\n    //       meetupId: \"m2\",\n    //     },\n    //   },\n    // ],\n    paths: meetups.map((meetup) => ({\n      params: { meetupId: meetup._id.toString() },\n    })),\n  };\n};\n\nexport const getStaticProps = async (context) => {\n  // Fetch data for a single meetup\n\n  // To fetch the data for the meetup we need a way to identify the meetup\n  // Here we need a way to identify the id and the id is thankfully encoded in th URL\n  // and basically we could have use the useRouter hook from NextJS to identify the id and use the query to reach the meetupdId\n  // But the problem is that the useRouter Hook can only be use in Component Function not in getStaticProps\n  // Hopefully the getStaticProps also receive a context as Parameter\n  // (although you cannot access the req and res as you do in getSerevrSideProps)\n  // but has a params key\n  const meetupId = context.params.meetupId;\n  const client = await MongoClient.connect(\n    \"mongodb+srv://admin:admin@cluster0.tcybw5n.mongodb.net/meetupsDB\"\n  );\n  รง;\n  const db = client.db();\n  const meetupsCollection = db.collection(\"meetups\");\n\n  const selectedMeetup = await meetupsCollection.findOne({\n    _id: ObjectId(meetupId),\n  });\n\n  client.close();\n\n  console.log(meetupId);\n\n  return {\n    props: {\n      meetupData: {\n        id: selectedMeetup._id.toString(),\n        title: selectedMeetup.title,\n        address: selectedMeetup.address,\n        image: selectedMeetup.image,\n        description: selectedMeetup.description,\n      },\n      //   meetupData: {\n      //     id: meetupId,\n      //     title: \"A Second Meetup\",\n      //     image:\n      //       \"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Stadtbild_M%C3%BCnchen.jpg/640px-Stadtbild_M%C3%BCnchen.jpg\",\n      //     address: \"Some address 3, the best city\",\n      //     description: \"this is a second meetup\",\n      //   },\n    },\n  };\n};\n\nexport default MeetupDetailsDynamicPage;\n"]},"metadata":{},"sourceType":"module"}